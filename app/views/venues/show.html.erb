<%= render partial: "back_button"%>
<div class="col s3">
     <div class="detailstitle">
           <h2 class= "flow-text center-align"><%= @venue.name%><%=@l%></h2>

       <% if (user_signed_in?)%>
        <% if current_user.admin? || @venue.owner == current_user.id%>
       <a class='dropdown-button btn edit-btn' href='#' data-activates='dropdown1'><i class="material-icons">settings</i></a>
        <%end%>
    <%end%>
     </div>

</div>
 <!-- Dropdown Structure -->
  <ul id='dropdown1' class='dropdown-content'>
    <li><%= link_to 'Edit Venue', edit_venue_path(@venue)%></li>
    <li class="divider"></li>
    <li><%= link_to 'Edit Beer List', venue_beer_list_path%></li>
    <li class="divider"></li>
    <li><%= link_to 'New Hour', new_event_path %></li>
    <li class="divider"></li>
    <li><%= link_to 'New Beer', new_beer_path%></li>
    <li class="divider"></li>
    <li><%=link_to venue_verified_venue_path(@venue), method: :get do%>
Verify Venue
                <%end%>
    </li>
  </ul>




<div class="row" style="margin:0;">
    <div class="col s12 profile-tabs">
      <ul class="tabs">
        <li class="tab col s4"><a class="active" href="#weekly">Weekly Hours</a></li>
        <li class="tab col s4"><a href="#beerlist">Beer List</a></li>
        <li class="tab col s4"><a href="#venueinfo">Info</a></li>
      </ul>
    </div>
  </div>





<!-- <div class="narrowchart">
	<div id="accordion">
		<!-- yeah, yeah, I spelled Accordion wrong,  do something about it.  - G  -->
<!-- 		<div class="accordianheader">
      <i class="material-icons">query_builder</i>Sunday
		</div>
		<div class="accordianbody">
			sadfsafsdf
		</div>
  </div>
</div> -->

<!-- <script>
  $( "#accordion" ).accordion({
      heightStyle: "content",
      active:false,
      collapsible: true,
      header:"div.accordianheader",
    });

</script> -->


<div id="weekly" class="col s12">
<ul class="collapsible beerlist" data-collapsible="accordion">
     <li>
      <div class="collapsible-header <%=@s%>"><i class="material-icons">query_builder</i>Sunday
        <div class="dropdownarrow">
         <%= image_tag "dropdown.png"%>
       </div>
       </div>
      <div class="collapsible-body">
        <% @d = "Sunday" %>
        <%= render "show_table" %>

      </div>


    </li>
    <li>
      <div class="collapsible-header <%=@m%>"><i class="material-icons">query_builder</i>Monday
      <div class="dropdownarrow">
         <%= image_tag "dropdown.png"%>
       </div>
      </div>
      <div class="collapsible-body">
        <% @d = "Monday" %>
        <%= render "show_table" %>
      </div>
    </li>
    <li>
      <div class="collapsible-header <%=@t%>"><i class="material-icons">query_builder</i>Tuesday
      <div class="dropdownarrow">
         <%= image_tag "dropdown.png"%>
       </div>
      </div>
      <div class="collapsible-body">
      <% @d = "Tuesday" %>
        <%= render "show_table" %>
      </div>
    </li>
    <li>
      <div class="collapsible-header <%=@w%>"><i class="material-icons">query_builder</i>Wednesday
      <div class="dropdownarrow">
         <%= image_tag "dropdown.png"%>
       </div>
      </div>
      <div class="collapsible-body">
        <% @d = "Wednesday" %>
        <%= render "show_table" %>
      </div>
    </li>
    <li>
      <div class="collapsible-header <%=@th%>"><i class="material-icons">query_builder</i>Thursday
      <div class="dropdownarrow">
         <%= image_tag "dropdown.png"%>
       </div>
      </div>
      <div class="collapsible-body">
        <% @d = "Thursday" %>
        <%= render "show_table" %>
      </div>
    </li>
    <li>
      <div class="collapsible-header <%=@f%>"><i class="material-icons">query_builder</i>Friday
      <div class="dropdownarrow">
         <%= image_tag "dropdown.png"%>
       </div>
      </div>
      <div class="collapsible-body">
        <% @d = "Friday" %>
        <%= render "show_table" %>
      </div>
    </li>
    <li>
      <div class="collapsible-header <%=@st%>"><i class="material-icons">query_builder</i>Saturday
      <div class="dropdownarrow">
         <%= image_tag "dropdown.png"%>
       </div>
      </div>
      <div class="collapsible-body">
        <% @d = "Saturday" %>
        <%= render "show_table" %>
      </div>
     </li>
  </ul>

</div>

  <!-- Modal Structure -->




  <!-- Modal Structure -->



  <div id="beerlist" class="col s12">
     <!--Beer List-->
<%@can_list = [] %>
<%@bottle_list =[]%>
<%@draft_list = []%>
<%k = []%>
<%k = @lists.where(beer_status: 2)%>
<%if k.first.nil? %>
   <ul class="collapsible" data-collapsible="accordion">
    <li class="nobeerlist"><%=@venue.name%> does not have a beer list</li>
   </ul>

    <%else%>
   <% @lists.where(beer_status: 2).order('name ASC').each do |list| %>
     <% if list.serving == "Draft"%>
        <%@draft_list.push(list)%>
     <%elsif list.serving == "Can" %>
        <%@can_list.push(list)%>
     <%else list.serving == "Bottle"%>
        <%@bottle_list.push(list)%>
      <%end%>
    <%end%>
<%if @draft_list.count > 0 %>
<div id="beerlist" class="col s12">
  <h4 class="flow-text listtitle">Drafts</h4>
<ul class="collapsible" data-collapsible="accordion">
<%@draft_list.each do |list|%>
   <li style="position:relative;">
     <%if @button == 1 %>
     <div class="remove-btn">
     <%=link_to add_to_reserve_beer_path(list), method: :patch do%>
            | Remove |
       <%end%>
     </div>
        <%end%>
         <div class="collapsible-header drinks">
            <h4> <%= list.name %></h4>
            <h6><%=list.serving_size%> oz. <%=list.serving%> (<%= list.abv %>% ABV)</h6>

            <%if list.price.length >= 1 %>
            <span class = "right beer-price">$<%= list.price %></span>
            <%end%>
            <% if list.beer_level == 1 %>
            <div class="now-tab low-tab">low</div>
            <%end%>
         </div>
         <div class="collapsible-body">
           <ul class="collection">
             <li class="collection-item grey lighten-3 special-by-day">
            <%= list.brewery %><br>(IPA)<br/><br/><%= list.details %>
             </li>
           </ul>
         </div>
   </li>

  <%end%>
  </ul>

<br>
<%end%>
<%if @bottle_list.count > 0 %>
<div id="beerlist" class="col s12">
  <h4 class="flow-text listtitle">Bottles</h4>
<ul class="collapsible" data-collapsible="accordion">
<%@bottle_list.each do |list|%>

   <li style="position:relative;">
     <%if @button == 1 %>
     <div class="remove-btn">
     <%=link_to add_to_reserve_beer_path(list), method: :patch do%>
            | Remove |
             </div>
            <%end%>
        <%end%>
         <div class="collapsible-header drinks">
            <h4> <%= list.name %></h4>
            <h6><%=list.serving_size%> oz. <%=list.serving%> (<%= list.abv %>% ABV)</h6>
            <%if list.price.length >= 1 %>
            <span class = "right beer-price">$<%= list.price %></span>
            <%end%>
            <% if list.beer_level == 1 %>
            <div class="now-tab low-tab">low</div>
            <%end%>
         </div>
        <div class="collapsible-body">
           <ul class="collection">
             <li class="collection-item grey lighten-3 special-by-day">
            <%= list.brewery %><br>(IPA)<br/><br/><%= list.details %>
             </li>
          </ul>
         </div>
   </li>

<%end%>
 </ul>

<br>
<%end%>
<%if @can_list.count > 0 %>
<div id="beerlist" class="col s12">
   <h4 class="flow-text listtitle">Cans</h4>
<ul class="collapsible" data-collapsible="accordion">
<%@can_list.each do |list|%>

   <li style="position:relative;">
     <%if @button == 1 %>
     <div class="remove-btn">
     <%=link_to add_to_reserve_beer_path(list), method: :patch do%>
            | Remove |
             </div>
            <%end%>
        <%end%>
         <div class="collapsible-header drinks">
            <h4> <%= list.name %></h4>
            <h6><%=list.serving_size%> oz. <%=list.serving%> (<%= list.abv %>% ABV)</h6>

            <%if list.price.length >= 1 %>
            <span class = "right beer-price">$<%= list.price %></span>
            <%end%>
            <% if list.beer_level == 1 %>
            <div class="now-tab low-tab">low</div>
            <%end%>
         </div>
         <div class="collapsible-body">
           <ul class="collection">
             <li class="collection-item grey lighten-3 special-by-day">
               <%= list.brewery %><br>(IPA)<br/><br/><%= list.details %>
             </li>
           </ul>
         </div>
   </li>

<%end%>
   </ul>

<br>
<%end%>
<%end%>
  </div>


  </div>
    </div>
</div>





<!-- Drop Down Button -->
       <!--%if user_signed_in?%>
        % if current_user.admin? || current_user.id == @venue.owner %-->
<!--        <a class='dropdown-button btn' href='#' data-activates='dropdown1'>Edit</a> -->
        <!--%end%>
        %end%>

<!--
        %= link_to 'Edit Venue', edit_venue_path(@venue), class: "waves-effect waves-light btn"  %>-->

 <div id="venueinfo" class="col s12">
    <a class="waves-effect waves-light btn newvenue menubtn" href=
        "http://<%= @venue.menu_address %>">Menu</a>
      <!-- End OF Drop Down -->
<div class="venue-details">
        <h3 class="flow-text">Contact Info:</h3>
        <p class="phonea">Phone: (<%=@venue.phone_number[0..2]%>) <%=@venue.phone_number[3..5]%>-<%=@venue.phone_number[6..9]%></p>
        <p><%= @venue.address%></p>
        <p><%= @venue.genre%></p>
    </div>
  </div>
<div class="col s12">
        <div class="card zdepth-5">
            <div class="card-content">

                <div id="map"></div>
            </div>
        </div>
    </div>



<style>
      #map {
        width: 100%;
        height: 400px;
      }
    </style>
    <script src="https://maps.googleapis.com/maps/api/js">
    </script>
    <script>

      function initialize() {
        var mapCanvas = document.getElementById('map');
        var mapOptions = {
          center: new google.maps.LatLng(<%= @venue.latitude %>,<%= @venue.longitude %>),
          zoom: 18,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        }
        var map = new google.maps.Map(mapCanvas, mapOptions);
        var marker = new google.maps.Marker({
          position: new google.maps.LatLng(<%= @venue.latitude %>,<%= @venue.longitude %>),
          title: "Here is Melbourne"
        });

        marker.setMap(map);
      }
      google.maps.event.addDomListener(window, 'load', initialize);

    </script>

<script>
  $(document).ready(function(){
    // the "href" attribute of .modal-trigger must specify the modal ID that wants to be triggered
   $('.modal-trigger').leanModal({
      dismissible: true, // Modal can be dismissed by clicking outside of the modal
      opacity: .5, // Opacity of modal background
      in_duration: 300, // Transition in duration
      out_duration: 200, // Transition out duration

    }
  );
  });
</script>

    <% if (user_signed_in?)%>
        <% if current_user.admin? %>
            <%= link_to 'New Venue', new_venue_path, class: "waves-effect waves-light btn newvenuebtn" %>
            <!--%= link_to 'Edit', edit_venue_path(@venue) %>--
        <%end%>
    <%end%>

<!--<%if @venue.neighborhood_id == 1%>
    <%= link_to 'Back',  south_side_path, class: "waves-effect waves-light btn" %>
<%elsif @venue.neighborhood_id == 2%>
    <%= link_to 'Back',  shadyside_path, class: "waves-effect waves-light btn" %>
<%else%>
   <%= link_to 'Back',  oakland_path, class: "waves-effect waves-light btn" %>
<%end%>-->

<!-- This script is for Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-77170385-1', 'auto');
  ga('send', 'pageview');

</script>




<div class="verified">
<%if @venue.venue_verify.nil?%>
 <p class="verified-date">Venue not verified<p/>
<%else%>
<%= image_tag "verified.png"%>
  <div class="verified-date">
<%=@venue.venue_verify.strftime("Verified on %m/%d/%Y")%>
  </div>
  <br/>
  <p style="margin: -20px 20px 50px 20px;" class="verified-date"> Time since last Verification: <%=distance_of_time_in_words(@venue.venue_verify, Time.now)%></p>

<%end%>
</div>


<!--TABS-->
<script>
   $(document).ready(function(){
    $('ul.tabs').tabs();
  });
</script>
<!--END TABS-->
